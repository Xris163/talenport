import { NextRequest, NextResponse } from 'next/server';import { createClient } from '@supabase/supabase-js';export async function GET(req:NextRequest){const user_id=new URL(req.url).searchParams.get('user_id');if(!user_id)return NextResponse.json({error:'Missing user_id'},{status:400});const sb=createClient(process.env.SUPABASE_URL as string, process.env.SUPABASE_SERVICE_KEY as string);const {count,error}=await sb.from('notifications').select('*',{count:'exact',head:true}).eq('user_id',user_id).is('read_at',null);if(error)return NextResponse.json({error:error.message},{status:400});return NextResponse.json({unread:count||0})}