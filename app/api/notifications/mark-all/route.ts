import { NextRequest, NextResponse } from 'next/server';import { createClient } from '@supabase/supabase-js';export async function PUT(req:NextRequest){const {user_id}=await req.json();if(!user_id)return NextResponse.json({error:'Missing user_id'},{status:400});const sb=createClient(process.env.SUPABASE_URL as string, process.env.SUPABASE_SERVICE_KEY as string);const {error}=await sb.from('notifications').update({read_at:new Date().toISOString()}).eq('user_id',user_id).is('read_at',null);if(error)return NextResponse.json({error:error.message},{status:400});return NextResponse.json({ok:true})}