import { NextRequest, NextResponse } from 'next/server';import { createClient } from '@supabase/supabase-js';export async function GET(req:NextRequest){const url=new URL(req.url);const company_id=url.searchParams.get('company_id');if(!company_id)return NextResponse.json({error:'Missing company_id'},{status:400});const sb=createClient(process.env.SUPABASE_URL as string, process.env.SUPABASE_SERVICE_KEY as string);const {data,error}=await sb.from('applications').select('id,created_at,status,note,cv_url,candidate_id, jobs!inner(id,title,company_id)').eq('jobs.company_id',company_id).order('created_at',{ascending:false});if(error)return NextResponse.json({error:error.message},{status:400});return NextResponse.json({applications:data})}