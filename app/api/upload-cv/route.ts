import { NextRequest, NextResponse } from 'next/server';import { createClient } from '@supabase/supabase-js';export async function POST(req:NextRequest){const {filename,contentType,userId}=await req.json();if(!filename||!userId)return NextResponse.json({error:'Missing filename/userId'},{status:400});const sb=createClient(process.env.SUPABASE_URL as string, process.env.SUPABASE_SERVICE_KEY as string);const key=`${'${'}userId${'}'}/${'${'}Date.now()${'}'}_${'${'}filename${'}'}`;const {data,error}=await sb.storage.from('resumes').createSignedUploadUrl(key);if(error)return NextResponse.json({error:error.message},{status:400});return NextResponse.json({url:data.signedUrl,path:key,contentType:contentType||'application/pdf'})}