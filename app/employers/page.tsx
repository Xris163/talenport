'use client';import {useEffect,useState} from 'react';export default function EmployersPage(){const[b,sB]=useState(0);useEffect(()=>{sB(Number(localStorage.getItem('credits')||'0'))},[]);function save(v){sB(v);localStorage.setItem('credits',String(v))}async function buy(n){const r=await fetch('/api/create-checkout',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({company_id:'demo-company-uuid',credits:n})});const j=await r.json();if(j.error)return alert('Chyba: '+j.error);alert('Redirect Stripe (DEMO): '+j.id);setTimeout(()=>{save(b+n);alert('Platba OK (DEMO), +'+n)},700)}function post(){if(b<=0){if(confirm('Nemáš kredity. Kúpiť 1 kredit za 19 €?')) buy(1);return;}save(b-1);alert('Inzerát publikovaný (DEMO). -1 kredit')}return(<main className='container section'><h2 style={{color:'var(--accent)'}}>Employer dashboard</h2><div className='grid-3' style={{marginTop:12}}><div className='card'><h3>Kredity</h3><p style={{fontSize:28,margin:0}}>{b}</p><div className='row' style={{gap:8,marginTop:8}}><button className='btn solid' onClick={()=>buy(1)}>Kúpiť 1</button><button className='btn solid' onClick={()=>buy(5)}>Kúpiť 5</button><button className='btn solid' onClick={()=>buy(20)}>Kúpiť 20</button></div></div><div className='card'><h3>Aktívne ponuky</h3><p>3</p></div><div className='card'><h3>Konverzie</h3><p>4,7%</p></div></div><div className='card' style={{marginTop:16}}><h3>Pridať ponuku</h3><p className='muted'>Zverejnenie stojí 1 kredit. Kandidáti zadarmo.</p><button className='btn solid' onClick={post}>Publikovať inzerát</button></div><div className='card' style={{marginTop:16}}><a className='btn' href='/employers/applications'>Žiadosti uchádzačov</a> <a className='btn' href='/employers/company' style={{marginLeft:8}}>Profil firmy</a></div></main>)}